"use strict";const input=document.querySelector("#search-input"),button=document.querySelector("#search-button"),form=document.querySelector("#search-form"),urlBase="http://api.tvmaze.com/search/shows?q=",elementUl=document.querySelector("#series-list"),favUl=document.querySelector("#fav-list"),resetButton=document.querySelector("#reset-button");let favourites=[];function getInfo(){const e=input.value.toLowerCase();fetch(urlBase+e).then(e=>e.json()).then(e=>t(e));const t=e=>{elementUl.innerHTML="";for(let t=0;t<e.length;t++){const n=e[t];console.log("estoy en función displayShow",n);const o=n.show,a=o.name,s=o.image,c=document.createElement("img"),l=document.createElement("h2"),i=document.createElement("li"),r=document.createTextNode(a);if(i.classList.add("nofavourite"),l.appendChild(r),i.appendChild(l),i.appendChild(c),elementUl.appendChild(i),i.addEventListener("click",function(e){const t=s.medium;favShow(e,a,t)}),null===s)c.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV");else if(null!==s){const e=s.medium;c.setAttribute("src",e)}}}}function favShow(e,t,n){console.log("llamando");const o=e.currentTarget;if(o.classList.contains("nofavourite")?(o.classList.remove("nofavourite"),o.classList.add("favourite")):(o.classList.remove("favourite"),o.classList.add("nofavourite")),o.classList.contains("favourite")){const e={title:t,pic:n};favourites.push(e),console.log(favourites)}const a=document.createElement("img");a.setAttribute("src",n);const s=document.createElement("h2"),c=document.createElement("li"),l=document.createTextNode(t);s.appendChild(l),c.appendChild(s),c.appendChild(a),favUl.appendChild(c),localStorage.setItem("favs",JSON.stringify(favourites))}function showLocal(){if(favourites=JSON.parse(localStorage.getItem("favs")),console.log(favourites),null!==localStorage.getItem("favs"))for(const e of favourites){let t=document.createElement("li"),n=document.createElement("h2"),o=document.createElement("img");o.src=e.pic;let a=document.createTextNode(e.title);n.appendChild(a),t.appendChild(n),t.appendChild(o),favUl.appendChild(t)}}function reset(){console.log("función reset"),favUl.innerHTML="",localStorage.removeItem("favs")}function submitHandler(e){e.preventDefault(),getInfo()}resetButton.addEventListener("click",reset),form.addEventListener("submit",submitHandler),button.addEventListener("click",getInfo),window.addEventListener("load",showLocal);