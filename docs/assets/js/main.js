"use strict";const input=document.querySelector("#search-input"),button=document.querySelector("#search-button"),form=document.querySelector("#search-form"),urlBase="http://api.tvmaze.com/search/shows?q=",elementUl=document.querySelector("#series-list"),favUl=document.querySelector("#fav-list"),resetButton=document.querySelector("#reset-button");let favourites;function getInfo(){const e=input.value.toLowerCase();fetch(urlBase+e).then(e=>e.json()).then(e=>t(e));const t=e=>{elementUl.innerHTML="";for(let t=0;t<e.length;t++){const o=e[t];console.log("estoy en función displayShow",o);const n=o.show,l=n.name,s=n.image,a=document.createElement("img"),c=document.createElement("h2"),i=document.createElement("li"),r=document.createTextNode(l);if(i.classList.add("nofavourite"),c.appendChild(r),i.appendChild(c),i.appendChild(a),elementUl.appendChild(i),i.addEventListener("click",function(e){const t=s?s.medium:"https://via.placeholder.com/210x295/ffffff/666666/?text=TV";favShow(i,l,t)}),null===s)a.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV");else if(null!==s){const e=s.medium;a.setAttribute("src",e)}}}}function favShow(e,t,o){if(console.log("holi"),e.classList.contains("nofavourite")?(e.classList.remove("nofavourite"),e.classList.add("favourite")):(e.classList.remove("favourite"),e.classList.add("nofavourite")),e.classList.contains("favourite")){const e={title:t,pic:o};console.log(e),favourites.push(e)}const n=document.createElement("img");n.setAttribute("src",o);const l=document.createElement("h2"),s=document.createElement("li"),a=document.createTextNode(t);l.appendChild(a),s.appendChild(l),s.appendChild(n),favUl.appendChild(s),localStorage.setItem("favs",JSON.stringify(favourites))}function showLocal(){if(null!==localStorage.getItem("favs")){favourites=JSON.parse(localStorage.getItem("favs")),console.log(favourites);for(const e of favourites){let t=document.createElement("li"),o=document.createElement("h2"),n=document.createElement("img");n.src=e.pic;let l=document.createTextNode(e.title);o.appendChild(l),t.appendChild(o),t.appendChild(n),favUl.appendChild(t)}}else favourites=[]}function reset(){console.log("función reset"),favUl.innerHTML="",localStorage.removeItem("favs")}function submitHandler(e){e.preventDefault(),getInfo()}resetButton.addEventListener("click",reset),form.addEventListener("submit",submitHandler),button.addEventListener("click",getInfo),window.addEventListener("load",showLocal);