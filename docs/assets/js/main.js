"use strict";const input=document.querySelector("#search-input"),button=document.querySelector("#search-button"),form=document.querySelector("#search-form"),urlBase="http://api.tvmaze.com/search/shows?q=",elementUl=document.querySelector("#series-list"),favUl=document.querySelector("#fav-list"),resetButton=document.querySelector("#reset-button");let favourites;function getInfo(){const e=input.value.toLowerCase();fetch(urlBase+e).then(e=>e.json()).then(e=>t(e));const t=e=>{elementUl.innerHTML="";for(let t=0;t<e.length;t++){const n=e[t];console.log("estoy en función displayShow",n);const o=n.show,s=o.name,a=o.image,l=document.createElement("img"),c=document.createElement("h2"),i=document.createElement("li"),r=document.createTextNode(s);if(i.classList.add("nofavourite"),c.appendChild(r),i.appendChild(c),i.appendChild(l),elementUl.appendChild(i),i.addEventListener("click",function(e){const t=a.medium;favShow(e,s,t)}),null===a)l.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV");else if(null!==a){const e=a.medium;l.setAttribute("src",e)}}}}function favShow(e,t,n){console.log("llamando");const o=e.currentTarget;if(o.classList.contains("nofavourite")?(o.classList.remove("nofavourite"),o.classList.add("favourite")):(o.classList.remove("favourite"),o.classList.add("nofavourite")),o.classList.contains("favourite")){const e={title:t,pic:n};console.log(e),favourites.push(e)}const s=document.createElement("img");s.setAttribute("src",n);const a=document.createElement("h2"),l=document.createElement("li"),c=document.createTextNode(t);a.appendChild(c),l.appendChild(a),l.appendChild(s),favUl.appendChild(l),localStorage.setItem("favs",JSON.stringify(favourites))}function showLocal(){if(null!==localStorage.getItem("favs")){favourites=JSON.parse(localStorage.getItem("favs")),console.log(favourites);for(const e of favourites){let t=document.createElement("li"),n=document.createElement("h2"),o=document.createElement("img");o.src=e.pic;let s=document.createTextNode(e.title);n.appendChild(s),t.appendChild(n),t.appendChild(o),favUl.appendChild(t)}}else favourites=[]}function reset(){console.log("función reset"),favUl.innerHTML="",localStorage.removeItem("favs")}function submitHandler(e){e.preventDefault(),getInfo()}resetButton.addEventListener("click",reset),form.addEventListener("submit",submitHandler),button.addEventListener("click",getInfo),window.addEventListener("load",showLocal);