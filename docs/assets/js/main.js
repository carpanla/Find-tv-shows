"use strict";const input=document.querySelector("#search-input"),button=document.querySelector("#search-button"),form=document.querySelector("#search-form"),urlBase="http://api.tvmaze.com/search/shows?q=",elementUl=document.querySelector("#series-list"),favUl=document.querySelector("#fav-list"),resetButton=document.querySelector("#reset-button");let favourites;function getInfo(){const e=input.value.toLowerCase();fetch(urlBase+e).then(e=>e.json()).then(e=>t(e));const t=e=>{elementUl.innerHTML="";for(let t=0;t<e.length;t++){const n=e[t];console.log("estoy en función displayShow",n);const o=n.show,l=o.name,c=o.image,s=document.createElement("img"),a=document.createElement("h2"),i=document.createElement("li"),r=document.createTextNode(l);if(i.classList.add("nofavourite"),a.appendChild(r),i.appendChild(a),i.appendChild(s),elementUl.appendChild(i),i.addEventListener("click",function(e){const t=c?c.medium:"https://via.placeholder.com/210x295/ffffff/666666/?text=TV";favShow(i,l,t)}),null===c)s.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV");else if(null!==c){const e=c.medium;s.setAttribute("src",e)}}}}function favShow(e,t,n){if(console.log("holi"),e.classList.contains("nofavourite")?(e.classList.remove("nofavourite"),e.classList.add("favourite")):(e.classList.remove("favourite"),e.classList.add("nofavourite")),e.classList.contains("favourite")){const e={title:t,pic:n};console.log(e),favourites.push(e)}const o=document.createElement("img");o.setAttribute("src",n);const l=document.createElement("h2"),c=document.createElement("li"),s=document.createTextNode(t);l.appendChild(s),c.appendChild(l),c.appendChild(o),favUl.appendChild(c),localStorage.setItem("favs",JSON.stringify(favourites))}function showLocal(){if(null!==localStorage.getItem("favs")){favourites=JSON.parse(localStorage.getItem("favs")),console.log(favourites);for(const e of favourites){let t=document.createElement("li"),n=document.createElement("h2"),o=document.createElement("img");o.src=e.pic;let l=document.createTextNode(e.title);n.appendChild(l),t.appendChild(n),t.appendChild(o),favUl.appendChild(t)}}else favourites=[]}function reset(){console.log("función reset"),elementUl.innerHTML="",favUl.innerHTML="",localStorage.clear()}function submitHandler(e){e.preventDefault(),getInfo()}resetButton.addEventListener("click",reset),form.addEventListener("submit",submitHandler),button.addEventListener("click",getInfo),window.addEventListener("load",showLocal);